# Хранилище информации о фильмах на чистом php с MVC

## Требования
php 7.4, mysql 8.0.25 (можно попробовать запустить на mysql 5.6+)

## Инструкция по запуску приложения

### Для запуска приложения неоходимо:
1) Создать базу данных и импортировать файлы структуры базы
2) Заполнить и переименовать файл конфигурации
3) Запустить веб сервер

### Создать базу данных и импортировать файл структуры базы
Нужно создать базу данных в mysql и выполнить импорт .sql файлов из папки database/migration по возростанию первого числа

### Заполнить и переименовать файл конфигурации
Нужно переименовать файл конфигурации в папке config c config.example.php в config.php

### Запустить веб сервер
Для разработки можно использовать PHP local server для этого нужно запустить php -S localhost:8080 в корневой папке веб приложения.
Для использования на подакшене нужно поднять апач сервер, что бы коректно использовать одну точку вхождения.


## Обзор и объяснение архитектуры приложения

### Разработка
Для разработки реализован дополнительный функционал который находится в lib/Dev.php который можно подключить в config/config.php

### Конфигурационный файл
Конфигурационный файл подключается глобально. Дефолтные параметры конфигурации представленны в config/config.example.php

### Маршрутизация
Маршрутизация происходит согласно данным файла routes/routes.php где можно настроить доступные урлы а так же на какую 
функцию котролера они должны вести. Урлы поддерживают патерны preg_match. Есть особый патерн (\d+) который позволяет 
передавать ид в функцию.

### Core MVC + Router
В веб приложении используется патерн MVC. Выбор пал на MVC потому что этот патерн популярный и самый знакомый мне.
Дефолтные классы MVC и класс роботы с роутами находятся в папке app/core.
В Model реализованы базовые запросы в базу данных для удобства использования.
В View реализован фунционал который подключает общий layout для всех страниц.
В Router реализован функционал по роботе с урлами согласно файлу routes/routes.php

### Extends Controllers
Наследуемые файлы контролеров находятся в папке app/controllers должны содержать в конце наименования 
класса и файла слово Controller.

### Extends Models
Наследуемые файлы моделей находятся в папке app/models, название класса и файла должны соответствовать таблице в 
базе данных с которой они работают, без буквы s. То есть для таблицы films должна быть модель Film. В моделе желательно указать
параметр $fillable, с масивом доступных для записи таблиц.

### Views и публичные данные
Шаблоны страниц находятся в папке app/views. Есть один обязательный шаблон он же общий для всех страниц app/views/layout.php
Публичные данные, то есть все что можно подгрузить на страницу статикой - находится в папке public.

### Traits как общий фунционал для классов.
Трейты находятся в папке app/traits, должны содержать в конце файла и класса слово Trait. Используются для создания функционала
Который может пригодится в разных классах.

### Валидация входных данных
Классы с валидацией данных находятся в папке app/validation и должны содержать в конце класса и файла слово Trait. Валидация 
реалзована через трейты что бы была возможность подключать к нужным классам.

### Подключение к базе данных и миграции
Класс для подключения к базе данных находится в database/Db.php. Реализован с патерном Singelton что бы использовать везде 
одно подкючение к базе данных.
Файлы миграций находятся в database/migration. Миграция выполняется в ручную, импортом файлов в базу.

### index.php - точка входа приложения
Файл для точки входя приложения index.php. В нем реализовано подключение глобального конфиг файла, подключение дев. файла, 
автозагрущик через spl_autoload_register, старт сесии, и ввызов роутера.